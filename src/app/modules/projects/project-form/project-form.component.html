<h2 mat-dialog-title>Crear Proyecto</h2>

<form [formGroup]="stepperForm" (ngSubmit)="crearProyecto()" class="full-width">
  <mat-horizontal-stepper [linear]="true" #stepper>
    <!-- Paso 1: Información básica -->
    <mat-step [stepControl]="paso1Group" label="Información Básica">
      <div>
        <mat-form-field appearance="fill">
          <mat-label>Nombre</mat-label>
          <input matInput formControlName="nombre" required />
          <mat-error *ngIf="paso1Group.get('nombre')?.invalid">El nombre es requerido</mat-error>
        </mat-form-field>

        <mat-form-field appearance="fill">
          <mat-label>Descripción</mat-label>
          <textarea matInput formControlName="descripcion"></textarea>
        </mat-form-field>

        <div class="button-row">
          <button mat-raised-button color="primary" matStepperNext [disabled]="paso1Group.invalid">Siguiente</button>
        </div>
      </div>
    </mat-step>

    <!-- Paso 2: Fechas -->
    <mat-step [stepControl]="paso2Group" label="Fechas">
      <div>
        <mat-form-field appearance="fill">
          <mat-label>Fecha Inicio</mat-label>
          <input matInput [matDatepicker]="pickerInicio" formControlName="fechaInicio" required />
          <mat-datepicker-toggle matSuffix [for]="pickerInicio"></mat-datepicker-toggle>
          <mat-datepicker #pickerInicio></mat-datepicker>
          <mat-error *ngIf="paso2Group.get('fechaInicio')?.invalid">Fecha inicio es requerida</mat-error>
        </mat-form-field>

        <mat-form-field appearance="fill">
          <mat-label>Fecha Fin</mat-label>
          <input matInput [matDatepicker]="pickerFin" formControlName="fechaFin" required />
          <mat-datepicker-toggle matSuffix [for]="pickerFin"></mat-datepicker-toggle>
          <mat-datepicker #pickerFin></mat-datepicker>
          <mat-error *ngIf="paso2Group.get('fechaFin')?.invalid">Fecha fin es requerida</mat-error>
        </mat-form-field>

        <div class="button-row">
          <button mat-button matStepperPrevious>Anterior</button>
          <button type="submit" mat-raised-button color="primary" [disabled]="paso2Group.invalid">Crear</button>
        </div>
      </div>
    </mat-step>
  </mat-horizontal-stepper>
</form>

<div mat-dialog-actions>
  <button mat-button (click)="cancelar()">Cancelar</button>
</div>
